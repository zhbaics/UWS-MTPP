/*
 * SelectNetBootModePane.java
 *
 * Created on 2009/08/20, PM 5:27
 */

package guisanboot.op.init;

import guisanboot.data.BootHost;
import javax.swing.*;
import javax.swing.border.*;
import guisanboot.ui.*;
import java.net.InetAddress;

/**
 *
 * @author  Administrator
 */
public class SelectNetBootModePane extends javax.swing.JPanel {
    
    /** Creates new form SelectBootHostPane */
    public SelectNetBootModePane() {
        initComponents();
    }
    
    public SelectNetBootModePane( SanBootView view ){
        this();
        myInit( view );
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        jPanel1 = new javax.swing.JPanel();
        jPanel2 = new javax.swing.JPanel();
        jPanel3 = new javax.swing.JPanel();
        jPanel4 = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTextArea1 = new javax.swing.JTextArea();
        jPanel5 = new javax.swing.JPanel();
        jRadioButton1 = new javax.swing.JRadioButton();
        jRadioButton2 = new javax.swing.JRadioButton();
        jRadioButton3 = new javax.swing.JRadioButton();
        jLabel1 = new javax.swing.JLabel();
        jTextField1 = new javax.swing.JTextField();
        jRadioButton5 = new javax.swing.JRadioButton();
        jRadioButton4 = new javax.swing.JRadioButton();
        jPanel6 = new javax.swing.JPanel();

        setLayout(new java.awt.BorderLayout());

        jPanel1.setPreferredSize(new java.awt.Dimension(20, 10));
        add(jPanel1, java.awt.BorderLayout.WEST);

        jPanel2.setPreferredSize(new java.awt.Dimension(20, 10));
        add(jPanel2, java.awt.BorderLayout.EAST);

        jPanel3.setLayout(new java.awt.BorderLayout());

        jPanel4.setPreferredSize(new java.awt.Dimension(10, 60));
        jPanel4.setLayout(new java.awt.BorderLayout());

        jScrollPane1.setBorder(javax.swing.BorderFactory.createEmptyBorder(1, 1, 1, 1));

        jTextArea1.setLineWrap(true);
        jTextArea1.setDisabledTextColor(java.awt.Color.black);
        jTextArea1.setEnabled(false);
        jTextArea1.setOpaque(false);
        jScrollPane1.setViewportView(jTextArea1);

        jPanel4.add(jScrollPane1, java.awt.BorderLayout.CENTER);

        jPanel3.add(jPanel4, java.awt.BorderLayout.NORTH);

        jPanel5.setBorder(javax.swing.BorderFactory.createTitledBorder("Mode"));
        jPanel5.setLayout(new java.awt.GridBagLayout());

        jRadioButton1.setText("Recommended Mode");
        jRadioButton1.setBorder(null);
        jRadioButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jRadioButton1ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        jPanel5.add(jRadioButton1, gridBagConstraints);

        jRadioButton2.setText("Substitute Mode");
        jRadioButton2.setBorder(null);
        jRadioButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jRadioButton2ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.insets = new java.awt.Insets(5, 0, 0, 0);
        jPanel5.add(jRadioButton2, gridBagConstraints);

        jRadioButton3.setText("iSCSI HBA");
        jRadioButton3.setBorder(null);
        jRadioButton3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jRadioButton3ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.insets = new java.awt.Insets(6, 0, 0, 0);
        jPanel5.add(jRadioButton3, gridBagConstraints);

        jLabel1.setText("Boot IP :");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.insets = new java.awt.Insets(2, 20, 0, 0);
        jPanel5.add(jLabel1, gridBagConstraints);

        jTextField1.setPreferredSize(new java.awt.Dimension(150, 21));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.insets = new java.awt.Insets(3, 2, 0, 0);
        jPanel5.add(jTextField1, gridBagConstraints);

        jRadioButton5.setText("Recommended Mode");
        jRadioButton5.setBorder(null);
        jRadioButton5.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jRadioButton5ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        jPanel5.add(jRadioButton5, gridBagConstraints);

        jRadioButton4.setText("Window PE");
        jRadioButton4.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jRadioButton4ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        jPanel5.add(jRadioButton4, gridBagConstraints);

        jPanel3.add(jPanel5, java.awt.BorderLayout.CENTER);

        jPanel6.setPreferredSize(new java.awt.Dimension(10, 40));
        jPanel3.add(jPanel6, java.awt.BorderLayout.PAGE_END);

        add(jPanel3, java.awt.BorderLayout.CENTER);
    }// </editor-fold>//GEN-END:initComponents

    private void jRadioButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jRadioButton2ActionPerformed
        clickJRadioBtn2();
    }//GEN-LAST:event_jRadioButton2ActionPerformed

    private void jRadioButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jRadioButton1ActionPerformed
        clickJRadioBtn1();
    }//GEN-LAST:event_jRadioButton1ActionPerformed

private void jRadioButton3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jRadioButton3ActionPerformed
        clickJRadioBtn3();
}//GEN-LAST:event_jRadioButton3ActionPerformed

private void jRadioButton5ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jRadioButton5ActionPerformed
        // TODO add your handling code here:
}//GEN-LAST:event_jRadioButton5ActionPerformed

private void jRadioButton4ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jRadioButton4ActionPerformed
        clickJRadioBtn4();
}//GEN-LAST:event_jRadioButton4ActionPerformed
    
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel jLabel1;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JRadioButton jRadioButton1;
    private javax.swing.JRadioButton jRadioButton2;
    private javax.swing.JRadioButton jRadioButton3;
    private javax.swing.JRadioButton jRadioButton4;
    private javax.swing.JRadioButton jRadioButton5;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTextArea jTextArea1;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration//GEN-END:variables
    
    SanBootView view;
    ButtonGroup grp = new ButtonGroup();
    
    private void myInit( SanBootView _view ){
        view = _view;
        setupLanguage();
        
        jTextArea1.setText(
            SanBootView.res.getString( "InitBootHostWizardDialog.tip8" )
        );
        grp.add( jRadioButton1 );
        grp.add( jRadioButton2 );
        grp.add( jRadioButton3 );
        grp.add( jRadioButton4 );

        jRadioButton1.setSelected( true );
        clickJRadioBtn1();

        this.jPanel5.remove(this.jRadioButton3);
        this.jPanel5.remove(this.jLabel1);
        this.jPanel5.remove(this.jTextField1);
 
    }
    
    private void setupLanguage(){
        ((TitledBorder)jPanel5.getBorder()).setTitle(
            SanBootView.res.getString("SelectNetBootModePane.borderTitle.mode")
        );
        jLabel1.setText( SanBootView.res.getString("SelectNetBootModePane.label.bootip")+" " );
        jRadioButton1.setText( SanBootView.res.getString("SelectNetBootModePane.radiobtn.bootmode1") );
        jRadioButton2.setText( SanBootView.res.getString("SelectNetBootModePane.radiobtn.bootmode2") );
        jRadioButton3.setText( SanBootView.res.getString("SelectNetBootModePane.radiobtn.bootmode3") );
        jRadioButton4.setText( SanBootView.res.getString("SelectNetBootModePane.radiobtn.bootmode4") );
    }
    
    public void clickJRadioBtn1( ) {                                              
        this.jTextField1.setEnabled( false );
        this.jLabel1.setEnabled( false );
        view.setNetBootMode(this.getBootMode());
    }       
     
    public void clickJRadioBtn2() {                                              
        this.clickJRadioBtn1();
        view.setNetBootMode(this.getBootMode());
    }
    
    public void clickJRadioBtn3() {        
        this.jTextField1.setEnabled( true );
        this.jLabel1.setEnabled( true );
        view.setNetBootMode(this.getBootMode());
    }

    public void clickJRadioBtn4() {
        this.jTextField1.setEnabled(false);
        this.jLabel1.setEnabled(false);
        view.setNetBootMode(this.getBootMode());
    }
    
    public void setEmBootMode( boolean val ){
        jRadioButton1.setSelected( val );
    }
     
    public void setIBootMode( boolean val ){
        jRadioButton2.setSelected( val );
    }
    
    public void setIScsiHBAMode( boolean val ){
        jRadioButton3.setSelected( val );
    }

    public void setIbbotWindowsPE( boolean val ){
        jRadioButton4.setSelected( val );
    }

    public boolean isSelectEmBootMode(){
        return jRadioButton1.isSelected();
    }
    
    public boolean isSelectIBootMode(){
        return jRadioButton2.isSelected();
    }
    
    public boolean isSelectIScsiHBAMode(){
        return jRadioButton3.isSelected();
    }
    
    public boolean checkInput(){
        if( this.jRadioButton3.isSelected() ){ 
            String ipStr = jTextField1.getText().trim();
            if( ipStr.equals("") ){
                JOptionPane.showMessageDialog(this,
                    SanBootView.res.getString("EditSubnetDialog.errMsg.noneHostIP")
                );
                return false;
            }
            
            try{
                InetAddress ip = InetAddress.getByName( ipStr );
            }catch(Exception ex){
                JOptionPane.showMessageDialog(this,
                    SanBootView.res.getString("EditSubnetDialog.errMsg.invalidHostIP") +" : "+ipStr
                );
                return false;
            }
            
            return true;
            
        }else{
            return true;
        }
    }
    
    public String getBootIPForIscsiHBA(){
        return jTextField1.getText().trim();
    }
    
    public void setBootIPForIscsiHBA( String ip ){
        jTextField1.setText( ip );
    }
    
    public Object[] getBootModeInfo(){
        Object[] ret;
        
        if( this.jRadioButton1.isSelected() ){
            ret = new Object[1];
            ret[0] = new Integer( BootHost.BOOT_MODE_EM );
            return ret;
        }else if( this.jRadioButton2.isSelected() ){
            ret = new Object[1];
            ret[0] = new Integer( BootHost.BOOT_MODE_IBOOT );
            return ret;
        }else if( this.jRadioButton3.isSelected() ){
            ret = new Object[2];
            ret[0] = new Integer( BootHost.BOOT_MODE_ISCSI_HBA );
            ret[1] = jTextField1.getText().trim();
            return ret;
        }else{
            ret = new Object[1];
            ret[0] = new Integer( BootHost.BOOT_MODE_WINDOWSPE );
            return ret;
        }
    }
    
    public int getBootMode(){
        if( this.jRadioButton1.isSelected() ){
            return BootHost.BOOT_MODE_EM;
        }else if( this.jRadioButton2.isSelected() ){
            return BootHost.BOOT_MODE_IBOOT;
        }else if(this.jRadioButton3.isSelected()){
            return BootHost.BOOT_MODE_ISCSI_HBA;
        }else{
            return BootHost.BOOT_MODE_WINDOWSPE;
        }
    }
    
    public void ctrlRadioBtn( boolean val ){
        jRadioButton1.setEnabled( val );
        jRadioButton2.setEnabled( val );
        jRadioButton3.setEnabled( val );
        jRadioButton4.setEnabled( val );
    }
}
